
func slice_init
  [SLICE] = 0

func slice_push
  slice = mem_tail_n_inc(8) # slice equal prev MEM_TAIL

  [slice] = [SLICE]       # 0 index - prev SLICE
  [slice + 1] = [SEQ_ID]  # 1 index - prev SEQ_ID
  [slice + 2] = [MEM_MAP] # 2 index - prev MEM_MAP

  [SLICE] = slice # switch to new slice
  each_slice_init()

func slice_pop
  slice = [SLICE]
  [MEM_TAIL] = slice
  [SLICE] = [slice]
  [SEQ_ID] = [slice + 1]
  [MEM_MAP] = [slice + 2]
